(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c889c8a0"],{"107c":function(e,t,n){var r=n("d039"),l=n("da84"),c=l.RegExp;e.exports=r((function(){var e=c("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},1276:function(e,t,n){"use strict";var r=n("2ba4"),l=n("c65b"),c=n("e330"),o=n("d784"),a=n("44e7"),d=n("825a"),i=n("1d80"),s=n("4840"),u=n("8aa5"),b=n("50c4"),p=n("577e"),m=n("dc4a"),O=n("4dae"),f=n("14c3"),g=n("9263"),h=n("9f7f"),j=n("d039"),v=h.UNSUPPORTED_Y,E=4294967295,x=Math.min,N=[].push,V=c(/./.exec),y=c(N),k=c("".slice),M=!j((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));o("split",(function(e,t,n){var c;return c="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var c=p(i(this)),o=void 0===n?E:n>>>0;if(0===o)return[];if(void 0===e)return[c];if(!a(e))return l(t,c,e,o);var d,s,u,b=[],m=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,h=new RegExp(e.source,m+"g");while(d=l(g,h,c)){if(s=h.lastIndex,s>f&&(y(b,k(c,f,d.index)),d.length>1&&d.index<c.length&&r(N,b,O(d,1)),u=d[0].length,f=s,b.length>=o))break;h.lastIndex===d.index&&h.lastIndex++}return f===c.length?!u&&V(h,"")||y(b,""):y(b,k(c,f)),b.length>o?O(b,0,o):b}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:l(t,this,e,n)}:t,[function(t,n){var r=i(this),o=void 0==t?void 0:m(t,e);return o?l(o,t,r,n):l(c,p(r),t,n)},function(e,r){var l=d(this),o=p(e),a=n(c,l,o,r,c!==t);if(a.done)return a.value;var i=s(l,RegExp),m=l.unicode,O=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(v?"g":"y"),g=new i(v?"^(?:"+l.source+")":l,O),h=void 0===r?E:r>>>0;if(0===h)return[];if(0===o.length)return null===f(g,o)?[o]:[];var j=0,N=0,V=[];while(N<o.length){g.lastIndex=v?0:N;var M,S=f(g,v?k(o,N):o);if(null===S||(M=x(b(g.lastIndex+(v?N:0)),o.length))===j)N=u(o,N,m);else{if(y(V,k(o,j,N)),V.length===h)return V;for(var D=1;D<=S.length-1;D++)if(y(V,S[D]),V.length===h)return V;N=j=M}}return y(V,k(o,j)),V}]}),!M,v)},"14c3":function(e,t,n){var r=n("da84"),l=n("c65b"),c=n("825a"),o=n("1626"),a=n("c6b6"),d=n("9263"),i=r.TypeError;e.exports=function(e,t){var n=e.exec;if(o(n)){var r=l(n,e,t);return null!==r&&c(r),r}if("RegExp"===a(e))return l(d,e,t);throw i("RegExp#exec called on incompatible receiver")}},"3fed":function(e,t,n){},"44e7":function(e,t,n){var r=n("861d"),l=n("c6b6"),c=n("b622"),o=c("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==l(e))}},"58ae":function(e,t,n){"use strict";n("3fed")},"8aa5":function(e,t,n){"use strict";var r=n("6547").charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},9263:function(e,t,n){"use strict";var r=n("c65b"),l=n("e330"),c=n("577e"),o=n("ad6d"),a=n("9f7f"),d=n("5692"),i=n("7c73"),s=n("69f3").get,u=n("fce3"),b=n("107c"),p=d("native-string-replace",String.prototype.replace),m=RegExp.prototype.exec,O=m,f=l("".charAt),g=l("".indexOf),h=l("".replace),j=l("".slice),v=function(){var e=/a/,t=/b*/g;return r(m,e,"a"),r(m,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),E=a.BROKEN_CARET,x=void 0!==/()??/.exec("")[1],N=v||x||E||u||b;N&&(O=function(e){var t,n,l,a,d,u,b,N=this,V=s(N),y=c(e),k=V.raw;if(k)return k.lastIndex=N.lastIndex,t=r(O,k,y),N.lastIndex=k.lastIndex,t;var M=V.groups,S=E&&N.sticky,D=r(o,N),w=N.source,I=0,B=y;if(S&&(D=h(D,"y",""),-1===g(D,"g")&&(D+="g"),B=j(y,N.lastIndex),N.lastIndex>0&&(!N.multiline||N.multiline&&"\n"!==f(y,N.lastIndex-1))&&(w="(?: "+w+")",B=" "+B,I++),n=new RegExp("^(?:"+w+")",D)),x&&(n=new RegExp("^"+w+"$(?!\\s)",D)),v&&(l=N.lastIndex),a=r(m,S?n:N,B),S?a?(a.input=j(a.input,I),a[0]=j(a[0],I),a.index=N.lastIndex,N.lastIndex+=a[0].length):N.lastIndex=0:v&&a&&(N.lastIndex=N.global?a.index+a[0].length:l),x&&a&&a.length>1&&r(p,a[0],n,(function(){for(d=1;d<arguments.length-2;d++)void 0===arguments[d]&&(a[d]=void 0)})),a&&M)for(a.groups=u=i(null),d=0;d<M.length;d++)b=M[d],u[b[0]]=a[b[1]];return a}),e.exports=O},"9f7f":function(e,t,n){var r=n("d039"),l=n("da84"),c=l.RegExp,o=r((function(){var e=c("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),a=o||r((function(){return!c("a","y").sticky})),d=o||r((function(){var e=c("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:d,MISSED_STICKY:a,UNSUPPORTED_Y:o}},ac1f:function(e,t,n){"use strict";var r=n("23e7"),l=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(e,t,n){"use strict";var r=n("825a");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},b0c0:function(e,t,n){var r=n("83ab"),l=n("5e77").EXISTS,c=n("e330"),o=n("9bf2").f,a=Function.prototype,d=c(a.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,s=c(i.exec),u="name";r&&!l&&o(a,u,{configurable:!0,get:function(){try{return s(i,d(this))[1]}catch(e){return""}}})},d784:function(e,t,n){"use strict";n("ac1f");var r=n("e330"),l=n("6eeb"),c=n("9263"),o=n("d039"),a=n("b622"),d=n("9112"),i=a("species"),s=RegExp.prototype;e.exports=function(e,t,n,u){var b=a(e),p=!o((function(){var t={};return t[b]=function(){return 7},7!=""[e](t)})),m=p&&!o((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[i]=function(){return n},n.flags="",n[b]=/./[b]),n.exec=function(){return t=!0,null},n[b](""),!t}));if(!p||!m||n){var O=r(/./[b]),f=t(b,""[e],(function(e,t,n,l,o){var a=r(e),d=t.exec;return d===c||d===s.exec?p&&!o?{done:!0,value:O(t,n,l)}:{done:!0,value:a(n,t,l)}:{done:!1}}));l(String.prototype,e,f[0]),l(s,b,f[1])}u&&d(s[b],"sham",!0)}},ec5c:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),l=Object(r["createElementVNode"])("h2",null,"訂單管理",-1),c={class:"text-end my-4"},o={class:"table"},a=Object(r["createElementVNode"])("thead",null,[Object(r["createElementVNode"])("tr",{class:"table-light"},[Object(r["createElementVNode"])("th",{scope:"col"},"購買時間"),Object(r["createElementVNode"])("th",{scope:"col",class:"text-start"},"訂單編號"),Object(r["createElementVNode"])("th",{scope:"col"},"Email"),Object(r["createElementVNode"])("th",{scope:"col",width:"200"},"購買品項"),Object(r["createElementVNode"])("th",{scope:"col"},"應付金額"),Object(r["createElementVNode"])("th",{scope:"col"},"訂單狀態"),Object(r["createElementVNode"])("th",{scope:"col"},"編輯/刪除")])],-1),d={scope:"row"},i={class:"text-start"},s={class:"text-center"},u={class:"form-check form-switch p-0"},b=["onUpdate:modelValue","onChange"],p={class:"btn-group btn-group-sm"},m=["onClick"],O=["onClick"];function f(e,t,n,f,g,h){var j=Object(r["resolveComponent"])("OrderModal"),v=Object(r["resolveComponent"])("Pagination"),E=Object(r["resolveComponent"])("DelAlertModal");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[l,Object(r["createElementVNode"])("div",c,[Object(r["createElementVNode"])("button",{class:"btn btn-outline-danger me-2",onClick:t[0]||(t[0]=function(e){return h.openModal("orderAllDelete")})}," 清空全部訂單 ")]),Object(r["createElementVNode"])("table",o,[a,Object(r["createElementVNode"])("tbody",null,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(g.orders,(function(e){return Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",{key:e.id},[Object(r["createElementVNode"])("th",d,Object(r["toDisplayString"])(e.create_at),1),Object(r["createElementVNode"])("td",i,Object(r["toDisplayString"])(e.id),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(e.user.email),1),Object(r["createElementVNode"])("td",null,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.products,(function(e){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:e.id},Object(r["toDisplayString"])(e.product.title),1)})),128))]),Object(r["createElementVNode"])("td",s,Object(r["toDisplayString"])(e.total),1),Object(r["createElementVNode"])("td",null,[Object(r["createElementVNode"])("div",u,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{class:"form-check-input ms-0 me-2",type:"checkbox",role:"switch",id:"item.id","onUpdate:modelValue":function(t){return e.is_paid=t},"true-value":!0,"false-value":!1,onChange:function(t){return h.updateOrder(e)}},null,40,b),[[r["vModelCheckbox"],e.is_paid]]),Object(r["createElementVNode"])("label",{class:Object(r["normalizeClass"])(["form-check-label",{"text-success":e.is_paid,"text-danger":!e.is_paid}]),for:"item.id"},Object(r["toDisplayString"])(e.is_paid?"已付款":"未付款"),3)])]),Object(r["createElementVNode"])("td",null,[Object(r["createElementVNode"])("div",p,[Object(r["createElementVNode"])("button",{type:"button",class:"btn btn-outline-primary",onClick:function(t){return h.openModal("orderModal",e)}}," 詳情 ",8,m),Object(r["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(t){return h.openModal("orderDelete",e)}}," 刪除 ",8,O)])])])})),128))])]),Object(r["createVNode"])(j,{ref:"orderModal","temp-order":g.tempOrder},null,8,["temp-order"]),Object(r["createVNode"])(v,{pages:g.pagination,onEmitPages:h.getOrders},null,8,["pages","onEmitPages"]),Object(r["createVNode"])(E,{ref:"delAlertModal","temp-order":g.tempOrder,"alert-modal-status":g.alertModalStatus,onGetOrders:h.getOrders},null,8,["temp-order","alert-modal-status","onGetOrders"])],64)}var g=n("5530"),h=(n("99af"),n("d3b7"),n("159b"),n("ac1f"),n("1276"),n("b0c0"),{id:"orderModal",ref:"orderModal",class:"modal fade","aria-labelledby":"orderModalLabel","aria-hidden":"true"}),j={class:"modal-dialog modal-xl"},v={class:"modal-content border-0"},E=Object(r["createElementVNode"])("div",{class:"modal-header bg-dark text-white"},[Object(r["createElementVNode"])("h5",{id:"orderModalLabel",class:"modal-title"},[Object(r["createElementVNode"])("span",null,"訂單細節")]),Object(r["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),x={class:"modal-body"},N={class:"row"},V={class:"col-md-4"},y=Object(r["createElementVNode"])("h3",null,"用戶資料",-1),k={class:"ms-2"},M=Object(r["createElementVNode"])("h3",null,"訂單詳情",-1),S={class:"ms-2"},D=Object(r["createElementVNode"])("li",null,"付款時間：",-1),w=Object(r["createTextVNode"])("付款狀態： "),I={key:0,class:"text-success"},B={key:1},C={class:"col-md-8"},R=Object(r["createElementVNode"])("h3",null,"購買品項",-1),_={class:"table"},A=Object(r["createElementVNode"])("thead",null,[Object(r["createElementVNode"])("tr",null,[Object(r["createElementVNode"])("th",{scope:"col"},"NO."),Object(r["createElementVNode"])("th",{scope:"col"},"商品名稱"),Object(r["createElementVNode"])("th",{scope:"col"},"數量")])],-1),T={scope:"row"},P=Object(r["createElementVNode"])("td",null,null,-1),$={class:"modal-footer"},U=Object(r["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function F(e,t,n,l,c,o){var a,d,i,s,u,b,p,m,O,f,g;return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",h,[Object(r["createElementVNode"])("div",j,[Object(r["createElementVNode"])("div",v,[E,Object(r["createElementVNode"])("div",x,[Object(r["createElementVNode"])("div",N,[Object(r["createElementVNode"])("div",V,[y,Object(r["createElementVNode"])("ul",k,[Object(r["createElementVNode"])("li",null,"姓名："+Object(r["toDisplayString"])(null===(a=e.tempOrder)||void 0===a||null===(d=a.user)||void 0===d?void 0:d.name),1),Object(r["createElementVNode"])("li",null,"信箱："+Object(r["toDisplayString"])(null===(i=e.tempOrder)||void 0===i||null===(s=i.user)||void 0===s?void 0:s.email),1),Object(r["createElementVNode"])("li",null,"電話："+Object(r["toDisplayString"])(null===(u=e.tempOrder)||void 0===u||null===(b=u.user)||void 0===b?void 0:b.tel),1),Object(r["createElementVNode"])("li",null,"地址："+Object(r["toDisplayString"])(null===(p=e.tempOrder)||void 0===p||null===(m=p.user)||void 0===m?void 0:m.address),1),Object(r["createElementVNode"])("li",null,"備註："+Object(r["toDisplayString"])(e.tempOrder.message),1)]),M,Object(r["createElementVNode"])("ul",S,[Object(r["createElementVNode"])("li",null,"訂單編號："+Object(r["toDisplayString"])(null===(O=e.tempOrder)||void 0===O?void 0:O.id),1),Object(r["createElementVNode"])("li",null,"下單時間："+Object(r["toDisplayString"])(null===(f=e.tempOrder)||void 0===f?void 0:f.create_at),1),D,Object(r["createElementVNode"])("li",null,[w,e.tempOrder.is_paid?(Object(r["openBlock"])(),Object(r["createElementBlock"])("strong",I,"已付款")):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",B,"尚未付款"))]),Object(r["createElementVNode"])("li",null,"總金額：NT$ "+Object(r["toDisplayString"])(null===(g=e.tempOrder)||void 0===g?void 0:g.total),1)])]),Object(r["createElementVNode"])("div",C,[R,Object(r["createElementVNode"])("table",_,[A,Object(r["createElementVNode"])("tbody",null,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.tempOrder.products,(function(e,t,n){return Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",{key:t},[Object(r["createElementVNode"])("th",T,Object(r["toDisplayString"])(n+1),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(e.product.title),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(e.product.num),1),P])})),128))])])])])]),Object(r["createElementVNode"])("div",$,[U,Object(r["createElementVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=function(){return o.closeOrderModal&&o.closeOrderModal.apply(o,arguments)})}," 確認 ")])])])],512)}var L=n("7c2b"),K=n.n(L),Y={props:["temp-order"],data:function(){return{orderModal:""}},methods:{openOrderModal:function(){this.orderModal.show()},closeOrderModal:function(){this.orderModal.hide()}},mounted:function(){this.orderModal=new K.a(this.$refs.orderModal,{keyboard:!1})}},G=(n("58ae"),n("6b0d")),J=n.n(G);const z=J()(Y,[["render",F]]);var X=z,q=n("1799"),H=n("16cf"),Q={data:function(){return{orders:[],pagination:{},tempOrder:{},alertModalStatus:"",createTime:""}},components:{OrderModal:X,Pagination:q["a"],DelAlertModal:H["a"]},methods:{getOrders:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("gillchin","/admin/orders?page=").concat(t);this.$http.get(n).then((function(t){e.orders=t.data.orders,e.pagination=t.data.pagination})).catch((function(e){console.log(e.response)}))},updateOrder:function(e){this.tempOrder=Object(g["a"])({},e),this.tempOrder.create_at=Math.floor(new Date(this.tempOrder.create_at)/1e3);var t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("gillchin","/admin/order/").concat(e.id);this.$http.put(t,{data:this.tempOrder}).then((function(e){})).catch((function(e){console.log(e.response)}))},openModal:function(e,t){"orderModal"===e?(this.tempOrder=Object(g["a"])({},t),this.$refs.orderModal.openOrderModal()):"orderDelete"!==e&&"orderAllDelete"!==e||(this.tempOrder=Object(g["a"])({},t),this.$refs.delAlertModal.openDelAlertModal(),this.alertModalStatus=e)}},watch:{orders:function(){this.orders.forEach((function(e){e.create_at=new Date(1e3*e.create_at).toISOString().split("T")[0]}))}},mounted:function(){this.getOrders()}};const W=J()(Q,[["render",f]]);t["default"]=W},fce3:function(e,t,n){var r=n("d039"),l=n("da84"),c=l.RegExp;e.exports=r((function(){var e=c(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))}}]);
//# sourceMappingURL=chunk-c889c8a0.b137a9bf.js.map